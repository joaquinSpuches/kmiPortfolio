---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Proyectos from '../components/Proyectos.astro';
import Bio from '../components/Bio.astro';
---

<Layout title="Kmi Portfolio">
 <main class="">
	<Header />
	<!-- Cambié top por bottom -->
	 <div id="overlay" class="fixed inset-0 bg-black opacity-0 pointer-events-none transition-opacity duration-500"></div>
	<div id="bio-panel" class="absolute z-10 -top-[500%] left-0 p-10 h-[200vh] w-screen  transition-all duration-500"> <Bio /></div>
	<Proyectos />
	<Footer />
 </main>
</Layout>

<script type="module">
const panel = document.getElementById('bio-panel');
if (panel) {
	document.addEventListener('click', (e) => {
		const anchor = e.target.closest && e.target.closest('a[href="/bio"]');
		
		if (anchor) {
			e.preventDefault();
			// Cambié las clases para usar top
			panel.classList.toggle('-top-[500%]');
			panel.classList.toggle('top-0');
			overlay.classList.remove("opacity-0", "pointer-events-none");
overlay.classList.add("opacity-80"); // 50% oscuro

			document.body.classList.add('no-scroll');
			return;
		}
		

		const isOpen = panel.classList.contains('top-0');
		if (isOpen) {
			const clickedInsidePanel = e.target.closest && e.target.closest('#bio-panel');
			
			if (!clickedInsidePanel) {
				panel.classList.remove('top-0');
				panel.classList.add('-top-[500%]');
				overlay.classList.add("opacity-0", "pointer-events-none");
				overlay.classList.remove("opacity-80");
				  document.body.classList.remove('no-scroll');
			}
		}
	});

	document.addEventListener('keydown', (e) => {
		if (e.key === 'Escape' && panel.classList.contains('top-0')) {
			panel.classList.remove('top-0');
			panel.classList.add('-top-[500%]');
			overlay.classList.add("opacity-0", "pointer-events-none");
			overlay.classList.remove("opacity-80");
			  document.body.classList.remove('no-scroll');
		}
	});
}
</script>

